export class CreateGallery{static querySelector(e){return document.querySelector(e)}static sortData(e){return(()=>{const t=e.map((({name:e})=>e));for(let e=0;e<t.length;e++)if(/^\d+$/.test(t[e]))return!0;return!1})()?e.sort(((e,t)=>e.name&&parseInt(e.name)-parseInt(t.name))):e.sort(((e,t)=>{if(e.name){const a=e.name.toUpperCase(),r=t.name.toUpperCase();if(a<r)return-1;if(a>r)return 1}return 0}))}static showLoading(){CreateGallery.querySelector("#loading").style.display="flex"}static hideLoading(){const e=CreateGallery.querySelector("#loading");e.classList.add("fade-out"),setTimeout((()=>{e.style.display="none"}),1100)}static addGalleryElementContainer(){const e=document.createElement("section");e.classList.add("grid","grid--container"),e.setAttribute("id","light-gallery"),e.innerHTML='\n      <style>\n        .grid-wrapper-item > img {\n          opacity: 0;\n          display: block;\n          max-width: 100%;\n        }\n        .grid-item,\n        .grid-sizer {\n          width: 25%;\n        }\n        .grid-item {\n          float: left;\n          cursor: pointer;\n        }\n      </style>\n\n      <div class="grid-sizer"></div>\n    ',document.body.appendChild(e)}static createMasonry(){try{const e=CreateGallery.querySelector(".grid");new Masonry(e,{itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,gutter:0}).layout()}catch(e){}}static createLightGallery(){try{const e=CreateGallery.querySelector("#light-gallery");lightGallery(e,{thumbnail:!0,animateThumb:!0,showThumbByDefault:!1,selector:".grid-wrapper-item",exThumbImage:"data-thumb"})}catch(e){}}static imgurGallery(e){e.forEach((e=>{const t=document.createElement("img"),a=document.createElement("div");a.setAttribute("data-src",e.link),a.setAttribute("id",e.id||Math.random().toString(36).substring(2)),a.setAttribute("data-thumb",e.link.replace(/(\.[^/.]+)$/,"t$1")),a.className="grid-wrapper-item",t.src=e.link.replace(/(\.[^/.]+)$/,"l$1"),t.title=e.name,t.className="grid-item",a.appendChild(t),document.getElementById("light-gallery").appendChild(a)}))}static commonGallery(e){e.forEach((e=>{const t=document.createElement("img"),a=document.createElement("div");a.setAttribute("data-src",e.link),a.setAttribute("id",e.id||Math.random().toString(36).substring(2)),a.setAttribute("data-thumb",e.thumb||e.link),a.className="grid-wrapper-item",t.src=e.thumb||e.link,t.className="grid-item",a.appendChild(t),document.getElementById("light-gallery").appendChild(a)}))}render(e,t){let a=!1;try{switch(CreateGallery.addGalleryElementContainer(),t){case"imgur":CreateGallery.imgurGallery(CreateGallery.sortData(e));break;default:CreateGallery.commonGallery(CreateGallery.sortData(e));break}a=!0}catch(e){throw new Error("Não foi possível listar as imagens do album\n"+e.message)}finally{if(a){const e=setInterval((()=>{const t={masonry:"function"==typeof Masonry,lightGallery:"function"==typeof lightGallery,imagesLoaded:"function"==typeof imagesLoaded};if(t&&t&&t){clearInterval(e),CreateGallery.createLightGallery();const t=CreateGallery.querySelector(".grid");imagesLoaded(t).on("progress",((e,t)=>{CreateGallery.createMasonry(),t.img.classList.add("fade-in")})),imagesLoaded(t).on("done",(()=>{CreateGallery.hideLoading()}))}}),1e3);CreateGallery.showLoading()}}}}